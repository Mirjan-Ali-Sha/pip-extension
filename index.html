<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description"
        content="Islamic Hijri Calendar with comprehensive event listings, dual-date display, and multi-language support. Install as a mobile app.">
    <meta name="theme-color" content="#0a1628">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Islamic Calendar">
    <title>Islamic Calendar â€” Hijri Calendar & Events</title>

    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" sizes="192x192" href="icons/icon-192.svg">
    <link rel="apple-touch-icon" href="icons/icon-192.svg">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- SPLASH SCREEN -->
    <div id="splash-screen">
        <div class="splash-content">
            <div class="splash-logo">â˜ªï¸</div>
            <h1 class="splash-title">Islamic Calendar</h1>
            <p class="splash-subtitle">Prayer Times & Events</p>
            <div class="splash-loader"></div>
            <p class="splash-author">Created by Mirjan Ali Sha</p>
        </div>
    </div>

    <!-- ========== HEADER ========== -->
    <header id="app-header">
        <div class="header-top">
            <div class="header-brand">
                <span class="brand-icon">â˜ª</span>
                <h1>Islamic Calendar</h1>
            </div>
            <div class="header-actions">

                <button id="btn-lang" class="icon-btn" title="Change Language" aria-label="Change Language">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10" />
                        <line x1="2" y1="12" x2="22" y2="12" />
                        <path
                            d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" />
                    </svg>
                </button>
                <button id="btn-date-jump" class="icon-btn" title="Jump to Date" aria-label="Jump to Date">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                        <circle cx="12" cy="16" r="2"></circle>
                    </svg>
                </button>
                <input type="date" id="date-jumper"
                    style="position:absolute; visibility:hidden; width:0; height:0; bottom:0; right:0;">

                <button id="btn-today" class="icon-btn" title="Go to Today" aria-label="Go to Today">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" />
                        <line x1="16" y1="2" x2="16" y2="6" />
                        <line x1="8" y1="2" x2="8" y2="6" />
                        <line x1="3" y1="10" x2="21" y2="10" />
                        <circle cx="12" cy="16" r="2" fill="currentColor" />
                    </svg>
                </button>
                <button id="btn-qibla" class="icon-btn" title="Qibla Compass" aria-label="Qibla Compass">
                    <span style="font-size: 1.2rem;">ğŸ§­</span>
                </button>
                <button id="btn-zakat" class="icon-btn" title="Zakat Calculator" aria-label="Zakat Calculator">
                    <span style="font-size: 1.2rem;">ğŸ’°</span>
                </button>
            </div>
        </div>

        <!-- Today Info Banner -->
        <div id="today-banner" class="today-banner">
            <div class="today-hijri" id="today-hijri-date"></div>
            <div class="today-greg" id="today-greg-date"></div>
            <div class="today-event" id="today-event"></div>
        </div>

        <!-- Location Bar -->
        <div class="location-bar" id="location-bar">
            <span class="location-icon">ğŸ“</span>
            <span class="location-name" id="location-name">Mecca, Saudi Arabia</span>
            <button class="location-change-btn" id="btn-change-location">Change</button>
        </div>
    </header>

    <!-- ========== LANGUAGE SELECTOR MODAL ========== -->
    <div id="lang-modal" class="modal-overlay" style="display:none;">
        <div class="modal-card lang-modal-card">
            <h2 id="lang-modal-title">Select Language</h2>
            <div class="lang-grid" id="lang-grid">
                <button class="lang-option active" data-lang="en">ğŸ‡¬ğŸ‡§ English</button>
                <button class="lang-option" data-lang="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
                <button class="lang-option" data-lang="bn">ğŸ‡§ğŸ‡©ğŸ‡®ğŸ‡³ à¦¬à¦¾à¦‚à¦²à¦¾</button>
                <button class="lang-option" data-lang="ur">ğŸ‡µğŸ‡°ğŸ‡®ğŸ‡³ Ø§Ø±Ø¯Ùˆ</button>
                <button class="lang-option" data-lang="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</button>
                <button class="lang-option" data-lang="ms">ğŸ‡²ğŸ‡¾ Bahasa Melayu</button>
                <button class="lang-option" data-lang="id">ğŸ‡®ğŸ‡© Bahasa Indonesia</button>
                <button class="lang-option" data-lang="fr">ğŸ‡«ğŸ‡· FranÃ§ais</button>
                <button class="lang-option" data-lang="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤‚à¤¦à¥€ (Hindi)</button>
                <button class="lang-option" data-lang="te">ğŸ‡®ğŸ‡³ à°¤à±†à°²à±à°—à± (Telugu)</button>
                <button class="lang-option" data-lang="ta">ğŸ‡®ğŸ‡³ à®¤à®®à®¿à®´à¯ (Tamil)</button>
                <button class="lang-option" data-lang="ml">ğŸ‡®ğŸ‡³ à´®à´²à´¯à´¾à´³à´‚ (Malayalam)</button>
            </div>
            <button class="modal-close-btn" id="lang-modal-close">âœ•</button>
        </div>
    </div>

    <!-- ========== MAIN CALENDAR ========== -->
    <main id="app-main">
        <!-- Month Navigation -->
        <nav class="month-nav" id="month-nav">
            <button id="btn-prev-month" class="nav-btn" aria-label="Previous Month">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                    stroke-linecap="round">
                    <polyline points="15 18 9 12 15 6" />
                </svg>
            </button>
            <div class="month-title-block" id="month-title-block">
                <h2 class="month-title-hijri" id="month-title-hijri"></h2>
                <span class="month-title-greg" id="month-title-greg"></span>
            </div>
            <button id="btn-next-month" class="nav-btn" aria-label="Next Month">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                    stroke-linecap="round">
                    <polyline points="9 18 15 12 9 6" />
                </svg>
            </button>
        </nav>

        <!-- Calendar Grid -->
        <div class="calendar-container">
            <div class="calendar-weekdays" id="calendar-weekdays"></div>
            <div class="calendar-grid" id="calendar-grid"></div>
        </div>

        <!-- Prayer Times Section -->
        <section class="prayer-section" id="prayer-section">
            <div class="prayer-header">
                <h3 class="prayer-title" id="prayer-title">ğŸ•Œ Prayer Times</h3>
                <button id="btn-notifications" class="notif-btn" title="Enable Notifications"
                    aria-label="Enable Notifications">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" />
                        <path d="M13.73 21a2 2 0 0 1-3.46 0" />
                    </svg>
                </button>
                <div class="prayer-countdown" id="prayer-countdown">
                    <span class="countdown-label" id="countdown-label">Next:</span>
                    <span class="countdown-timer" id="countdown-timer"></span>
                </div>
            </div>
            <div class="prayer-grid" id="prayer-grid"></div>
            <div class="prayer-method-note" id="prayer-method-note"></div>
        </section>

        <!-- Events List for Current Month -->
        <section class="events-section" id="events-section">
            <h3 class="events-title" id="events-title">Events This Month</h3>
            <div class="events-list" id="events-list"></div>
        </section>

        <!-- Category Legend -->
        <section class="legend-section" id="legend-section">
            <div class="legend-items" id="legend-items"></div>
        </section>
    </main>

    <!-- ========== EVENT DETAIL MODAL ========== -->
    <div id="event-modal" class="modal-overlay" style="display:none;">
        <div class="modal-card event-modal-card">
            <button class="modal-close-btn" id="event-modal-close">âœ•</button>
            <div class="event-modal-icon" id="event-modal-icon"></div>
            <h2 class="event-modal-title" id="event-modal-title"></h2>
            <div class="event-modal-date" id="event-modal-date"></div>
            <p class="event-modal-desc" id="event-modal-desc"></p>
            <div class="event-modal-category" id="event-modal-category"></div>
        </div>
    </div>

    <!-- ========== DATE PRAYER TIMES MODAL ========== -->
    <div id="date-prayer-modal" class="modal-overlay" style="display:none;">
        <div class="modal-card date-prayer-modal-card">
            <button class="modal-close-btn" id="date-prayer-modal-close">âœ•</button>
            <h2 id="date-prayer-title"></h2>
            <div class="date-prayer-subtitle" id="date-prayer-subtitle"></div>
            <div class="date-prayer-grid" id="date-prayer-grid"></div>
        </div>
    </div>

    <!-- ========== FOOTER ========== -->
    <footer id="app-footer">
        <p>Islamic Calendar PWA &bull; <span id="footer-year"></span></p>
        <p class="author-credit">Created by <span class="author-name">Mirjan Ali Sha</span></p>
        <p class="footer-note" id="footer-note">Dates are based on the tabular Islamic calendar (arithmetic
            approximation). Actual dates may vary by 1-2 days based on moon sighting.</p>
    </footer>

    <!-- ========== INSTALL PROMPT ========== -->
    <div id="install-banner" class="install-banner" style="display:none;">
        <span id="install-text">Install this app on your device</span>
        <button id="install-btn" class="install-btn">Install</button>
        <button id="install-dismiss" class="install-dismiss">âœ•</button>
    </div>

    <!-- ========== UPDATE AVAILABLE BANNER ========== -->
    <div id="update-banner" class="update-banner" style="display:none;">
        <span id="update-banner-text" class="update-banner-text">ğŸ”„ A new version is available!</span>
        <button id="update-btn" class="update-btn">Update Now</button>
        <button id="update-dismiss" class="update-dismiss">âœ•</button>
    </div>



    <!-- ========== LOCATION SELECTION MODAL ========== -->
    <div id="location-modal" class="modal-overlay" style="display:none;">
        <div class="modal-card location-modal-card">
            <button class="modal-close-btn" id="location-modal-close">âœ•</button>
            <h2 class="location-modal-title">ğŸ“ Select Location</h2>

            <div class="location-gps-row">
                <button class="gps-btn" id="btn-gps">
                    <span class="gps-icon">ğŸ›°ï¸</span> Auto-detect (GPS)
                </button>
            </div>

            <div class="location-search-row">
                <input type="text" id="location-search" class="location-search" placeholder="Search city..."
                    autocomplete="off">
            </div>

            <div class="location-method-row">
                <label class="method-label">Calculation Method:</label>
                <select id="calc-method" class="method-select">
                    <option value="mwl">Muslim World League</option>
                    <option value="isna">ISNA (North America)</option>
                    <option value="egypt">Egyptian General Authority</option>
                    <option value="makkah">Umm al-Qura (Makkah)</option>
                    <option value="karachi">Karachi</option>
                </select>
            </div>

            <div class="location-method-row">
                <label class="method-label">Asr Calculation:</label>
                <select id="asr-school" class="method-select">
                    <option value="shafii">Shafi'i / Maliki / Hanbali</option>
                    <option value="hanafi">Hanafi</option>
                </select>
            </div>

            <div class="location-method-row time-adjust-row">
                <label class="method-label">â±ï¸ Time Adjustment:</label>
                <div class="time-adjust-controls">
                    <select id="time-adjust-sign" class="time-adjust-sign">
                        <option value="+">+</option>
                        <option value="-">âˆ’</option>
                    </select>
                    <input type="number" id="time-adjust-min" class="time-adjust-input" min="0" max="59" value="0"
                        placeholder="0">
                    <span class="time-adjust-label">min</span>
                    <input type="number" id="time-adjust-sec" class="time-adjust-input" min="0" max="59" value="0"
                        placeholder="0">
                    <span class="time-adjust-label">sec</span>
                </div>
            </div>

            <div class="city-list" id="city-list"></div>
        </div>
    </div>

    <!-- ========== QIBLA COMPASS VIEW ========== -->
    <div id="qibla-view" class="full-screen-view" style="display:none;">
        <header class="view-header">
            <button class="view-back-btn" id="qibla-back-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <polyline points="15 18 9 12 15 6" />
                </svg>
            </button>
            <div style="flex:1">
                <h2 id="qibla-title">Qibla Compass</h2>
                <div id="qibla-accuracy-badge" class="qibla-accuracy-badge">Checking Accuracy...</div>
            </div>
            <button id="qibla-refresh-gps" class="icon-btn" title="Refresh GPS Location" style="margin-left: 10px;">
                <span style="font-size: 1.1rem;">ğŸ›°ï¸</span>
            </button>
        </header>
        <div class="view-content qibla-content">
            <!-- GPS Permission Overlay -->
            <div id="qibla-gps-overlay" class="qibla-overlay" style="display:none;">
                <div class="overlay-card">
                    <div class="overlay-icon">ğŸ›°ï¸</div>
                    <h3>GPS Access Required</h3>
                    <p>Precise Qibla direction requires your current GPS location. Please enable location access in your
                        device settings.</p>
                    <button id="qibla-grant-gps" class="primary-btn">Enable Precise Location</button>
                    <div id="qibla-gps-error" class="error-text" style="display:none;"></div>
                </div>
            </div>

            <div class="compass-container">
                <div class="alignment-glow" id="alignment-glow"></div>
                <div class="compass-ring">
                    <span class="direction n">N</span>
                    <span class="direction e">E</span>
                    <span class="direction s">S</span>
                    <span class="direction w">W</span>
                </div>
                <div class="compass-needle" id="compass-needle">
                    <div class="needle-north"></div>
                    <div class="needle-south"></div>
                    <div class="mecca-icon">ğŸ•‹</div>
                </div>
            </div>
            <div class="qibla-info">
                <div id="qibla-guide" class="qibla-guide-arrow"></div>
                <div class="qibla-bearing" id="qibla-bearing">Bearing: --Â°</div>
                <div class="qibla-status" id="qibla-status">Calculating...</div>
            </div>

            <div class="qibla-calibration-controls">
                <button id="btn-calibrate" class="calibrate-btn">
                    <span class="icon">âš–ï¸</span> Calibrate Compass
                </button>
                <div id="qibla-calibration-progress" class="calibration-progress" style="display:none;">
                    <div class="progress-bar"></div>
                    <span>Stabilizing...</span>
                </div>
            </div>

            <div class="qibla-instructions">
                <p>ğŸ“ Lay your device flat on a non-metallic surface.</p>
                <p>ğŸ”„ If the needle seems stuck, move your device in a <b>figure-8</b> motion to recalibrate the
                    sensors.</p>
            </div>
        </div>
    </div>

    <!-- ========== ZAKAT CALCULATOR MODAL ========== -->
    <div id="zakat-modal" class="modal-overlay" style="display:none;">
        <div class="modal-card zakat-modal-card">
            <button class="modal-close-btn" id="zakat-modal-close">âœ•</button>
            <h2 class="zakat-modal-title">ğŸ’° Zakat Calculator</h2>
            <div class="zakat-form">
                <div class="zakat-input-group">
                    <label>Cash & Bank Savings</label>
                    <input type="number" id="zakat-cash" placeholder="0.00">
                </div>
                <div class="zakat-input-group">
                    <label>Gold & Silver (Value)</label>
                    <input type="number" id="zakat-gold" placeholder="0.00">
                </div>
                <div class="zakat-input-group">
                    <label>Other Assets / Investments</label>
                    <input type="number" id="zakat-other" placeholder="0.00">
                </div>
                <div class="zakat-input-group">
                    <label>Debts & Liabilities (Minus)</label>
                    <input type="number" id="zakat-debts" placeholder="0.00">
                </div>
                <div class="zakat-result-area">
                    <div class="result-label">Total Zakat Due:</div>
                    <div class="result-value" id="zakat-result">0.00</div>
                    <div class="result-note">(2.5% of net wealth)</div>
                </div>
            </div>
        </div>
    </div>

    <script src="hijri.js"></script>
    <script src="events.js"></script>
    <script src="prayer-times.js"></script>
    <script src="cities.js"></script>

    <script src="app.js"></script>
</body>


</html>